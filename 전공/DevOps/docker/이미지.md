
이미지는 dockerfile build 할때 
docker file 의 각 명령어를 하나씩 실행하면서 생긴 컨테이너 파일 구조중 변경된 사항을 스냅샷으로 찍은 결과물이 레이어인데 그 레이어가 스택처럼 하나씩 쌓이면서 생긴다.
즉 레이어가 스택처럼 쌓인것이 이미지다.

## 도커파일의 명령어를 실행하려면 컨테이너 안에서 먼저 명령어를 실행해야 하는데 어떻게 이미지가 먼저 생성되고 컨테이너를 띄울수 있을까?

사실 도커파일로 이미지를 생성하려고 하면, 먼저 임시 컨테이너가 각 명령어 한줄마다 띄워져서 레이어를 만든다. 다음줄 명령어는 기존까지 쌓였던 레이어를 임시컨테이너로 만들어서 또 명령어를 실행하고를 반복한다. 이렇게 이미지를 생성한다.


from 은 어떤 이미지를 베이스로 시작할건지 정한다. = from 에 명시되어 있는 것도 이미지 임으로 레이어가 스택처럼 쌓인 구조다. 이것을 베이스로 한줄씩 명령어 실행할때마다 그 위에 레이어를 쌓는다.

``` dockerfile
# 베이스 이미지
FROM alpine:3.18
# 알파인 리눅스 임시 컨테이너 생성
# /app 이라는 폴더가 생성된 상황을 스냅샷으로 찍어 레이어 생성
RUN mkdir /app
# 알파인 리눅스 + /app 이라는 폴더가 생긴 임시 컨테이너 생성 (여태까지 쌓인 레이어를 실행 상태로 변경)
# ./build.gradle 파일이 생긴 파일 구조 스냅샷으로 찍어 레이어 생성
COPY build.gradle ./build.gradle
# 기존 레이어로 임시 컨테이너 생성(알파인 리눅스 + /app + ./build.gradle 파일)
# /app/hello 파일에 hello 라는 값을 넣음 -> 레이어 생성.
RUN echo "Hello" > /app/hello.txt
```

이제 이것으로 쌓인 레이어를 실행시키면 도커 컨테이너가 되는 것이다.